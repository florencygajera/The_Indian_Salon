{% extends "base.html" %}
{% block content %}
<h1>Gallery</h1>
<p>Latest posts from our Instagram.</p>

{% if posts and posts|length > 0 %}
  <div class="grid">
    {% for p in posts %}
      <a class="tile" href="{{ p.permalink }}" target="_blank" rel="noopener">
        {% if p.media_type == "VIDEO" and p.thumbnail_url %}
          <img src="{{ p.thumbnail_url }}" alt="Instagram post" loading="lazy" />
        {% elif p.media_url %}
          <img src="{{ p.media_url }}" alt="Instagram post" loading="lazy" />
        {% else %}
          <div class="fallback">Open Post</div>
        {% endif %}
      </a>
    {% endfor %}
  </div>
{% else %}
  <div class="card">
    <p>No cached posts yet.</p>
    <p>Admin: call <code>POST /api/instagram/sync</code> once after setting token.</p>
    <p>Or use the quick embed method below.</p>
  </div>
{% endif %}

<div class="card">
  <h3>Follow us</h3>
  <a class="btn" href="{{ salon.instagram }}" target="_blank">Open Instagram</a>
</div>
{% endblock %}
